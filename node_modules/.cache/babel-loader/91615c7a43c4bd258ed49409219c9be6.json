{"ast":null,"code":"\"use strict\";\n\nvar ParseUUIDPipe_1;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ParseUUIDPipe = void 0;\n\nconst tslib_1 = require(\"tslib\");\n\nconst injectable_decorator_1 = require(\"../decorators/core/injectable.decorator\");\n\nconst optional_decorator_1 = require(\"../decorators/core/optional.decorator\");\n\nconst http_status_enum_1 = require(\"../enums/http-status.enum\");\n\nconst http_error_by_code_util_1 = require(\"../utils/http-error-by-code.util\");\n\nconst shared_utils_1 = require(\"../utils/shared.utils\");\n\nlet ParseUUIDPipe = ParseUUIDPipe_1 = class ParseUUIDPipe {\n  constructor(options) {\n    options = options || {};\n    const {\n      exceptionFactory,\n      errorHttpStatusCode = http_status_enum_1.HttpStatus.BAD_REQUEST,\n      version\n    } = options;\n    this.version = version;\n\n    this.exceptionFactory = exceptionFactory || (error => new http_error_by_code_util_1.HttpErrorByCode[errorHttpStatusCode](error));\n  }\n\n  async transform(value, metadata) {\n    if (!this.isUUID(value, this.version)) {\n      throw this.exceptionFactory(`Validation failed (uuid${this.version ? ` v ${this.version}` : ''} is expected)`);\n    }\n\n    return value;\n  }\n\n  isUUID(str) {\n    let version = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'all';\n\n    if (!(0, shared_utils_1.isString)(str)) {\n      throw this.exceptionFactory('The value passed as UUID is not a string');\n    }\n\n    const pattern = ParseUUIDPipe_1.uuidRegExps[version];\n    return pattern === null || pattern === void 0 ? void 0 : pattern.test(str);\n  }\n\n};\nParseUUIDPipe.uuidRegExps = {\n  3: /^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\n  4: /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\n  5: /^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\n  all: /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i\n};\nParseUUIDPipe = ParseUUIDPipe_1 = tslib_1.__decorate([(0, injectable_decorator_1.Injectable)(), tslib_1.__param(0, (0, optional_decorator_1.Optional)()), tslib_1.__metadata(\"design:paramtypes\", [Object])], ParseUUIDPipe);\nexports.ParseUUIDPipe = ParseUUIDPipe;","map":{"version":3,"names":["ParseUUIDPipe_1","Object","defineProperty","exports","value","ParseUUIDPipe","tslib_1","require","injectable_decorator_1","optional_decorator_1","http_status_enum_1","http_error_by_code_util_1","shared_utils_1","constructor","options","exceptionFactory","errorHttpStatusCode","HttpStatus","BAD_REQUEST","version","error","HttpErrorByCode","transform","metadata","isUUID","str","isString","pattern","uuidRegExps","test","all","__decorate","Injectable","__param","Optional","__metadata"],"sources":["C:/Users/Admin/Desktop/NikeShoes/node_modules/@nestjs/common/pipes/parse-uuid.pipe.js"],"sourcesContent":["\"use strict\";\nvar ParseUUIDPipe_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ParseUUIDPipe = void 0;\nconst tslib_1 = require(\"tslib\");\nconst injectable_decorator_1 = require(\"../decorators/core/injectable.decorator\");\nconst optional_decorator_1 = require(\"../decorators/core/optional.decorator\");\nconst http_status_enum_1 = require(\"../enums/http-status.enum\");\nconst http_error_by_code_util_1 = require(\"../utils/http-error-by-code.util\");\nconst shared_utils_1 = require(\"../utils/shared.utils\");\nlet ParseUUIDPipe = ParseUUIDPipe_1 = class ParseUUIDPipe {\n    constructor(options) {\n        options = options || {};\n        const { exceptionFactory, errorHttpStatusCode = http_status_enum_1.HttpStatus.BAD_REQUEST, version, } = options;\n        this.version = version;\n        this.exceptionFactory =\n            exceptionFactory ||\n                (error => new http_error_by_code_util_1.HttpErrorByCode[errorHttpStatusCode](error));\n    }\n    async transform(value, metadata) {\n        if (!this.isUUID(value, this.version)) {\n            throw this.exceptionFactory(`Validation failed (uuid${this.version ? ` v ${this.version}` : ''} is expected)`);\n        }\n        return value;\n    }\n    isUUID(str, version = 'all') {\n        if (!(0, shared_utils_1.isString)(str)) {\n            throw this.exceptionFactory('The value passed as UUID is not a string');\n        }\n        const pattern = ParseUUIDPipe_1.uuidRegExps[version];\n        return pattern === null || pattern === void 0 ? void 0 : pattern.test(str);\n    }\n};\nParseUUIDPipe.uuidRegExps = {\n    3: /^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\n    4: /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\n    5: /^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\n    all: /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\n};\nParseUUIDPipe = ParseUUIDPipe_1 = tslib_1.__decorate([\n    (0, injectable_decorator_1.Injectable)(),\n    tslib_1.__param(0, (0, optional_decorator_1.Optional)()),\n    tslib_1.__metadata(\"design:paramtypes\", [Object])\n], ParseUUIDPipe);\nexports.ParseUUIDPipe = ParseUUIDPipe;\n"],"mappings":"AAAA;;AACA,IAAIA,eAAJ;AACAC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,aAAR,GAAwB,KAAK,CAA7B;;AACA,MAAMC,OAAO,GAAGC,OAAO,CAAC,OAAD,CAAvB;;AACA,MAAMC,sBAAsB,GAAGD,OAAO,CAAC,yCAAD,CAAtC;;AACA,MAAME,oBAAoB,GAAGF,OAAO,CAAC,uCAAD,CAApC;;AACA,MAAMG,kBAAkB,GAAGH,OAAO,CAAC,2BAAD,CAAlC;;AACA,MAAMI,yBAAyB,GAAGJ,OAAO,CAAC,kCAAD,CAAzC;;AACA,MAAMK,cAAc,GAAGL,OAAO,CAAC,uBAAD,CAA9B;;AACA,IAAIF,aAAa,GAAGL,eAAe,GAAG,MAAMK,aAAN,CAAoB;EACtDQ,WAAW,CAACC,OAAD,EAAU;IACjBA,OAAO,GAAGA,OAAO,IAAI,EAArB;IACA,MAAM;MAAEC,gBAAF;MAAoBC,mBAAmB,GAAGN,kBAAkB,CAACO,UAAnB,CAA8BC,WAAxE;MAAqFC;IAArF,IAAkGL,OAAxG;IACA,KAAKK,OAAL,GAAeA,OAAf;;IACA,KAAKJ,gBAAL,GACIA,gBAAgB,KACXK,KAAK,IAAI,IAAIT,yBAAyB,CAACU,eAA1B,CAA0CL,mBAA1C,CAAJ,CAAmEI,KAAnE,CADE,CADpB;EAGH;;EACc,MAATE,SAAS,CAAClB,KAAD,EAAQmB,QAAR,EAAkB;IAC7B,IAAI,CAAC,KAAKC,MAAL,CAAYpB,KAAZ,EAAmB,KAAKe,OAAxB,CAAL,EAAuC;MACnC,MAAM,KAAKJ,gBAAL,CAAuB,0BAAyB,KAAKI,OAAL,GAAgB,MAAK,KAAKA,OAAQ,EAAlC,GAAsC,EAAG,eAAzF,CAAN;IACH;;IACD,OAAOf,KAAP;EACH;;EACDoB,MAAM,CAACC,GAAD,EAAuB;IAAA,IAAjBN,OAAiB,uEAAP,KAAO;;IACzB,IAAI,CAAC,CAAC,GAAGP,cAAc,CAACc,QAAnB,EAA6BD,GAA7B,CAAL,EAAwC;MACpC,MAAM,KAAKV,gBAAL,CAAsB,0CAAtB,CAAN;IACH;;IACD,MAAMY,OAAO,GAAG3B,eAAe,CAAC4B,WAAhB,CAA4BT,OAA5B,CAAhB;IACA,OAAOQ,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAACE,IAAR,CAAaJ,GAAb,CAAzD;EACH;;AArBqD,CAA1D;AAuBApB,aAAa,CAACuB,WAAd,GAA4B;EACxB,GAAG,kEADqB;EAExB,GAAG,wEAFqB;EAGxB,GAAG,wEAHqB;EAIxBE,GAAG,EAAE;AAJmB,CAA5B;AAMAzB,aAAa,GAAGL,eAAe,GAAGM,OAAO,CAACyB,UAAR,CAAmB,CACjD,CAAC,GAAGvB,sBAAsB,CAACwB,UAA3B,GADiD,EAEjD1B,OAAO,CAAC2B,OAAR,CAAgB,CAAhB,EAAmB,CAAC,GAAGxB,oBAAoB,CAACyB,QAAzB,GAAnB,CAFiD,EAGjD5B,OAAO,CAAC6B,UAAR,CAAmB,mBAAnB,EAAwC,CAAClC,MAAD,CAAxC,CAHiD,CAAnB,EAI/BI,aAJ+B,CAAlC;AAKAF,OAAO,CAACE,aAAR,GAAwBA,aAAxB"},"metadata":{},"sourceType":"script"}