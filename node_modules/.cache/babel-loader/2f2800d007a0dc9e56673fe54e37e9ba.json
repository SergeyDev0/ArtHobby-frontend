{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StreamableFile = void 0;\n\nconst stream_1 = require(\"stream\");\n\nconst util_1 = require(\"util\");\n\nconst shared_utils_1 = require(\"../utils/shared.utils\");\n\nclass StreamableFile {\n  constructor(bufferOrReadStream) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var _a;\n\n    var _b;\n\n    this.options = options;\n\n    this.handleError = (err, res) => {\n      if (!res.destroyed) {\n        res.statusCode = 400;\n        res.send(err.message);\n      }\n    };\n\n    if (util_1.types.isUint8Array(bufferOrReadStream)) {\n      this.stream = new stream_1.Readable();\n      this.stream.push(bufferOrReadStream);\n      this.stream.push(null);\n      (_a = (_b = this.options).length) !== null && _a !== void 0 ? _a : _b.length = bufferOrReadStream.length;\n    } else if (bufferOrReadStream.pipe && (0, shared_utils_1.isFunction)(bufferOrReadStream.pipe)) {\n      this.stream = bufferOrReadStream;\n    }\n  }\n\n  getStream() {\n    return this.stream;\n  }\n\n  getHeaders() {\n    const {\n      type = 'application/octet-stream',\n      disposition = undefined,\n      length = undefined\n    } = this.options;\n    return {\n      type,\n      disposition,\n      length\n    };\n  }\n\n  get errorHandler() {\n    return this.handleError;\n  }\n\n  setErrorHandler(handler) {\n    this.handleError = handler;\n    return this;\n  }\n\n}\n\nexports.StreamableFile = StreamableFile;","map":{"version":3,"names":["Object","defineProperty","exports","value","StreamableFile","stream_1","require","util_1","shared_utils_1","constructor","bufferOrReadStream","options","_a","_b","handleError","err","res","destroyed","statusCode","send","message","types","isUint8Array","stream","Readable","push","length","pipe","isFunction","getStream","getHeaders","type","disposition","undefined","errorHandler","setErrorHandler","handler"],"sources":["C:/Users/Admin/Desktop/NikeShoes/node_modules/@nestjs/common/file-stream/streamable-file.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StreamableFile = void 0;\nconst stream_1 = require(\"stream\");\nconst util_1 = require(\"util\");\nconst shared_utils_1 = require(\"../utils/shared.utils\");\nclass StreamableFile {\n    constructor(bufferOrReadStream, options = {}) {\n        var _a;\n        var _b;\n        this.options = options;\n        this.handleError = (err, res) => {\n            if (!res.destroyed) {\n                res.statusCode = 400;\n                res.send(err.message);\n            }\n        };\n        if (util_1.types.isUint8Array(bufferOrReadStream)) {\n            this.stream = new stream_1.Readable();\n            this.stream.push(bufferOrReadStream);\n            this.stream.push(null);\n            (_a = (_b = this.options).length) !== null && _a !== void 0 ? _a : (_b.length = bufferOrReadStream.length);\n        }\n        else if (bufferOrReadStream.pipe && (0, shared_utils_1.isFunction)(bufferOrReadStream.pipe)) {\n            this.stream = bufferOrReadStream;\n        }\n    }\n    getStream() {\n        return this.stream;\n    }\n    getHeaders() {\n        const { type = 'application/octet-stream', disposition = undefined, length = undefined, } = this.options;\n        return {\n            type,\n            disposition,\n            length,\n        };\n    }\n    get errorHandler() {\n        return this.handleError;\n    }\n    setErrorHandler(handler) {\n        this.handleError = handler;\n        return this;\n    }\n}\nexports.StreamableFile = StreamableFile;\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,cAAR,GAAyB,KAAK,CAA9B;;AACA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,QAAD,CAAxB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,MAAD,CAAtB;;AACA,MAAME,cAAc,GAAGF,OAAO,CAAC,uBAAD,CAA9B;;AACA,MAAMF,cAAN,CAAqB;EACjBK,WAAW,CAACC,kBAAD,EAAmC;IAAA,IAAdC,OAAc,uEAAJ,EAAI;;IAC1C,IAAIC,EAAJ;;IACA,IAAIC,EAAJ;;IACA,KAAKF,OAAL,GAAeA,OAAf;;IACA,KAAKG,WAAL,GAAmB,CAACC,GAAD,EAAMC,GAAN,KAAc;MAC7B,IAAI,CAACA,GAAG,CAACC,SAAT,EAAoB;QAChBD,GAAG,CAACE,UAAJ,GAAiB,GAAjB;QACAF,GAAG,CAACG,IAAJ,CAASJ,GAAG,CAACK,OAAb;MACH;IACJ,CALD;;IAMA,IAAIb,MAAM,CAACc,KAAP,CAAaC,YAAb,CAA0BZ,kBAA1B,CAAJ,EAAmD;MAC/C,KAAKa,MAAL,GAAc,IAAIlB,QAAQ,CAACmB,QAAb,EAAd;MACA,KAAKD,MAAL,CAAYE,IAAZ,CAAiBf,kBAAjB;MACA,KAAKa,MAAL,CAAYE,IAAZ,CAAiB,IAAjB;MACA,CAACb,EAAE,GAAG,CAACC,EAAE,GAAG,KAAKF,OAAX,EAAoBe,MAA1B,MAAsC,IAAtC,IAA8Cd,EAAE,KAAK,KAAK,CAA1D,GAA8DA,EAA9D,GAAoEC,EAAE,CAACa,MAAH,GAAYhB,kBAAkB,CAACgB,MAAnG;IACH,CALD,MAMK,IAAIhB,kBAAkB,CAACiB,IAAnB,IAA2B,CAAC,GAAGnB,cAAc,CAACoB,UAAnB,EAA+BlB,kBAAkB,CAACiB,IAAlD,CAA/B,EAAwF;MACzF,KAAKJ,MAAL,GAAcb,kBAAd;IACH;EACJ;;EACDmB,SAAS,GAAG;IACR,OAAO,KAAKN,MAAZ;EACH;;EACDO,UAAU,GAAG;IACT,MAAM;MAAEC,IAAI,GAAG,0BAAT;MAAqCC,WAAW,GAAGC,SAAnD;MAA8DP,MAAM,GAAGO;IAAvE,IAAsF,KAAKtB,OAAjG;IACA,OAAO;MACHoB,IADG;MAEHC,WAFG;MAGHN;IAHG,CAAP;EAKH;;EACe,IAAZQ,YAAY,GAAG;IACf,OAAO,KAAKpB,WAAZ;EACH;;EACDqB,eAAe,CAACC,OAAD,EAAU;IACrB,KAAKtB,WAAL,GAAmBsB,OAAnB;IACA,OAAO,IAAP;EACH;;AAtCgB;;AAwCrBlC,OAAO,CAACE,cAAR,GAAyBA,cAAzB"},"metadata":{},"sourceType":"script"}