{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createCacheManager = void 0;\n\nconst load_package_util_1 = require(\"../utils/load-package.util\");\n\nconst cache_constants_1 = require(\"./cache.constants\");\n\nconst cache_module_definition_1 = require(\"./cache.module-definition\");\n\nconst default_options_1 = require(\"./default-options\");\n/**\n * Creates a CacheManager Provider.\n *\n * @publicApi\n */\n\n\nfunction createCacheManager() {\n  return {\n    provide: cache_constants_1.CACHE_MANAGER,\n    useFactory: options => {\n      const cacheManager = (0, load_package_util_1.loadPackage)('cache-manager', 'CacheModule', () => require('cache-manager')); // eslint-disable-next-line @typescript-eslint/no-var-requires\n\n      const cacheManagerVersion = require('cache-manager/package.json').version;\n\n      const cacheManagerMajor = cacheManagerVersion.split('.')[0];\n\n      const cachingFactory = (store, options) => {\n        if (cacheManagerMajor < 5) {\n          return cacheManager.caching(Object.assign(Object.assign({}, default_options_1.defaultCacheOptions), Object.assign(Object.assign({}, options), {\n            store\n          })));\n        }\n\n        return cacheManager.caching(store !== null && store !== void 0 ? store : 'memory', Object.assign(Object.assign({}, default_options_1.defaultCacheOptions), options));\n      };\n\n      return Array.isArray(options) ? cacheManager.multiCaching(options.map(option => cachingFactory(options.store, option))) : cachingFactory(options.store, options);\n    },\n    inject: [cache_module_definition_1.MODULE_OPTIONS_TOKEN]\n  };\n}\n\nexports.createCacheManager = createCacheManager;","map":{"version":3,"names":["Object","defineProperty","exports","value","createCacheManager","load_package_util_1","require","cache_constants_1","cache_module_definition_1","default_options_1","provide","CACHE_MANAGER","useFactory","options","cacheManager","loadPackage","cacheManagerVersion","version","cacheManagerMajor","split","cachingFactory","store","caching","assign","defaultCacheOptions","Array","isArray","multiCaching","map","option","inject","MODULE_OPTIONS_TOKEN"],"sources":["C:/Users/Admin/Desktop/NikeShoes/node_modules/@nestjs/common/cache/cache.providers.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createCacheManager = void 0;\nconst load_package_util_1 = require(\"../utils/load-package.util\");\nconst cache_constants_1 = require(\"./cache.constants\");\nconst cache_module_definition_1 = require(\"./cache.module-definition\");\nconst default_options_1 = require(\"./default-options\");\n/**\n * Creates a CacheManager Provider.\n *\n * @publicApi\n */\nfunction createCacheManager() {\n    return {\n        provide: cache_constants_1.CACHE_MANAGER,\n        useFactory: (options) => {\n            const cacheManager = (0, load_package_util_1.loadPackage)('cache-manager', 'CacheModule', () => require('cache-manager'));\n            // eslint-disable-next-line @typescript-eslint/no-var-requires\n            const cacheManagerVersion = require('cache-manager/package.json').version;\n            const cacheManagerMajor = cacheManagerVersion.split('.')[0];\n            const cachingFactory = (store, options) => {\n                if (cacheManagerMajor < 5) {\n                    return cacheManager.caching(Object.assign(Object.assign({}, default_options_1.defaultCacheOptions), Object.assign(Object.assign({}, options), { store })));\n                }\n                return cacheManager.caching(store !== null && store !== void 0 ? store : 'memory', Object.assign(Object.assign({}, default_options_1.defaultCacheOptions), options));\n            };\n            return Array.isArray(options)\n                ? cacheManager.multiCaching(options.map(option => cachingFactory(options.store, option)))\n                : cachingFactory(options.store, options);\n        },\n        inject: [cache_module_definition_1.MODULE_OPTIONS_TOKEN],\n    };\n}\nexports.createCacheManager = createCacheManager;\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,kBAAR,GAA6B,KAAK,CAAlC;;AACA,MAAMC,mBAAmB,GAAGC,OAAO,CAAC,4BAAD,CAAnC;;AACA,MAAMC,iBAAiB,GAAGD,OAAO,CAAC,mBAAD,CAAjC;;AACA,MAAME,yBAAyB,GAAGF,OAAO,CAAC,2BAAD,CAAzC;;AACA,MAAMG,iBAAiB,GAAGH,OAAO,CAAC,mBAAD,CAAjC;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASF,kBAAT,GAA8B;EAC1B,OAAO;IACHM,OAAO,EAAEH,iBAAiB,CAACI,aADxB;IAEHC,UAAU,EAAGC,OAAD,IAAa;MACrB,MAAMC,YAAY,GAAG,CAAC,GAAGT,mBAAmB,CAACU,WAAxB,EAAqC,eAArC,EAAsD,aAAtD,EAAqE,MAAMT,OAAO,CAAC,eAAD,CAAlF,CAArB,CADqB,CAErB;;MACA,MAAMU,mBAAmB,GAAGV,OAAO,CAAC,4BAAD,CAAP,CAAsCW,OAAlE;;MACA,MAAMC,iBAAiB,GAAGF,mBAAmB,CAACG,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAA1B;;MACA,MAAMC,cAAc,GAAG,CAACC,KAAD,EAAQR,OAAR,KAAoB;QACvC,IAAIK,iBAAiB,GAAG,CAAxB,EAA2B;UACvB,OAAOJ,YAAY,CAACQ,OAAb,CAAqBtB,MAAM,CAACuB,MAAP,CAAcvB,MAAM,CAACuB,MAAP,CAAc,EAAd,EAAkBd,iBAAiB,CAACe,mBAApC,CAAd,EAAwExB,MAAM,CAACuB,MAAP,CAAcvB,MAAM,CAACuB,MAAP,CAAc,EAAd,EAAkBV,OAAlB,CAAd,EAA0C;YAAEQ;UAAF,CAA1C,CAAxE,CAArB,CAAP;QACH;;QACD,OAAOP,YAAY,CAACQ,OAAb,CAAqBD,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqCA,KAArC,GAA6C,QAAlE,EAA4ErB,MAAM,CAACuB,MAAP,CAAcvB,MAAM,CAACuB,MAAP,CAAc,EAAd,EAAkBd,iBAAiB,CAACe,mBAApC,CAAd,EAAwEX,OAAxE,CAA5E,CAAP;MACH,CALD;;MAMA,OAAOY,KAAK,CAACC,OAAN,CAAcb,OAAd,IACDC,YAAY,CAACa,YAAb,CAA0Bd,OAAO,CAACe,GAAR,CAAYC,MAAM,IAAIT,cAAc,CAACP,OAAO,CAACQ,KAAT,EAAgBQ,MAAhB,CAApC,CAA1B,CADC,GAEDT,cAAc,CAACP,OAAO,CAACQ,KAAT,EAAgBR,OAAhB,CAFpB;IAGH,CAhBE;IAiBHiB,MAAM,EAAE,CAACtB,yBAAyB,CAACuB,oBAA3B;EAjBL,CAAP;AAmBH;;AACD7B,OAAO,CAACE,kBAAR,GAA6BA,kBAA7B"},"metadata":{},"sourceType":"script"}